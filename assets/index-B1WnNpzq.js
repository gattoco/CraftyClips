import{f as v,o as f,h as c,e as u,b as C,l as h,t as p,u as E,v as g,i as x,a as y}from"./index-CxIWv2we.js";var L=p("<video id=video-player style=width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1; autoplay>");const b=t=>{const[i,o]=v(0),a=()=>t.clips[i()],n=()=>i()<t.clips.length-1?t.clips[i()+1]:null,r=()=>{i()<t.clips.length-1?o(i()+1):console.log("End of queue.")},l=e=>e.replace("-preview-480x272.jpg",".mp4"),d=()=>{const e=document.getElementById("video-player");e&&(e.addEventListener("ended",r),e.addEventListener("error",r))},m=()=>{const e=n()?l(n().thumbnail_url):null;if(e){const s=document.createElement("link");s.rel="preload",s.as="video",s.href=e,document.head.appendChild(s),c(()=>{document.head.removeChild(s)})}};return f(()=>{d()}),c(()=>{const e=document.getElementById("video-player");e&&(e.removeEventListener("ended",r),e.removeEventListener("error",r))}),u(()=>u(()=>!!a())()?(()=>{var e=L();return e.addEventListener("loadeddata",m),e.controls=!1,e.muted=!1,C(()=>h(e,"src",l(a().thumbnail_url))),e})():[])};var _=p("<div>");const B=()=>{const{state:t,setState:i}=E(),o=g(),a=n=>{if(!n)return t.clips;const r=t.clipQueue.find(l=>l.id===n);return r?r.clips.map(l=>t.clips.find(d=>d.id===l)).filter(l=>!!l):t.clips};return(()=>{var n=_();return x(n,y(b,{get clips(){return a(o.id)}})),n})()};export{B as default};
